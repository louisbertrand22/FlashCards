{% extends "base.html" %}

{% block title %}{{ _('Dashboard') }} - {{ _('FlashCards') }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <h1 class="mb-4">ğŸ“Š {{ _('Dashboard') }}</h1>
    </div>
</div>

<div class="row">
    <div class="col-md-3 mb-4">
        <div class="card text-center stat-card">
            <div class="card-body">
                <h5 class="card-title text-muted">{{ _('Total Cards') }}</h5>
                <h2 class="display-4 text-primary">{{ stats.total_cards }}</h2>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-4">
        <div class="card text-center stat-card">
            <div class="card-body">
                <h5 class="card-title text-muted">{{ _('Due for Review') }}</h5>
                <h2 class="display-4 text-warning">{{ stats.due_for_review }}</h2>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-4">
        <div class="card text-center stat-card">
            <div class="card-body">
                <h5 class="card-title text-muted">{{ _('Total Reviews') }}</h5>
                <h2 class="display-4 text-success">{{ stats.total_reviews }}</h2>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-4">
        <div class="card text-center stat-card">
            <div class="card-body">
                <h5 class="card-title text-muted">{{ _('Study Progress') }}</h5>
                <h2 class="display-4 text-info">
                    {% if stats.total_cards > 0 %}
                        {{ ((stats.total_cards - stats.due_for_review) / stats.total_cards * 100) | round | int }}%
                    {% else %}
                        0%
                    {% endif %}
                </h2>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">ğŸ“ˆ {{ _('Cards by Difficulty') }}</h5>
            </div>
            <div class="card-body">
                <div class="difficulty-stats">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span>ğŸŸ¢ {{ _('Easy') }}</span>
                        <span class="badge bg-success">{{ stats.easy_cards }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span>ğŸŸ¡ {{ _('Medium') }}</span>
                        <span class="badge bg-warning">{{ stats.medium_cards }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <span>ğŸ”´ {{ _('Hard') }}</span>
                        <span class="badge bg-danger">{{ stats.hard_cards }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        {% if stats.total_reviews > 0 %}
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">ğŸ–ï¸ {{ _('Review Performance') }}</h5>
            </div>
            <div class="card-body">
                <div class="performance-stats">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span>{{ _('Success Rate') }}</span>
                        <span class="badge bg-primary">{{ stats.overall_success_rate }}%</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span>{{ _('Best Streak') }}</span>
                        <span class="badge bg-warning">ğŸ”¥ {{ stats.best_streak }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <span>{{ _('Active Streaks') }}</span>
                        <span class="badge bg-success">{{ stats.cards_with_streaks }}</span>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="card">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">ğŸ’¡ {{ _('Getting Started') }}</h5>
            </div>
            <div class="card-body">
                <p class="mb-0">{{ _('Start reviewing cards to track your progress and build streaks! Your success rate and streaks will appear here.') }}</p>
            </div>
        </div>
        {% endif %}
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">ğŸ¯ {{ _('Quick Actions') }}</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    {% if stats.due_for_review > 0 %}
                        <a href="{{ url_for('study') }}" class="btn btn-warning btn-lg">
                            ğŸ¯ {{ _('Study Now (%(count)s cards due)', count=stats.due_for_review) }}
                        </a>
                    {% else %}
                        <button class="btn btn-success btn-lg" disabled>
                            âœ… {{ _('All caught up!') }}
                        </button>
                    {% endif %}
                    <a href="{{ url_for('create_card') }}" class="btn btn-primary btn-lg">
                        ğŸ“ {{ _('Create New Card') }}
                    </a>
                    <a href="{{ url_for('view_cards') }}" class="btn btn-secondary btn-lg">
                        ğŸ“š {{ _('View All Cards') }}
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% if stats.total_cards == 0 %}
<div class="row mt-4">
    <div class="col-md-12">
        <div class="alert alert-info text-center">
            <h4>ğŸ‘‹ {{ _('Welcome to FlashCards!') }}</h4>
            <p class="mb-0">{{ _('You don\'t have any flashcards yet.') }} <a href="{{ url_for('create_card') }}" class="alert-link">{{ _('Create your first card') }}</a> {{ _('to get started!') }}</p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
